{"content":"version 1.0\n# This WDL takes in a single interleaved(R1+R2) FASTQ file and separates it into \n# separate R1 and R2 FASTQ (i.e. paired FASTQ) files. Paired FASTQ files are the \n# input format for the tool that generates unmapped BAMs (the format used in most \n# GATK processing and analysis tools).\n#\n# Requirements/expectations \n# - Interleaved Fastq file\n#\n# Outputs \n# - Separate R1 and R2 FASTQ files (i.e. paired FASTQ)\n#\n##################\n\nworkflow UninterleaveFastqs {\n  input {\n    File input_fastq\n  }\n\n  call uninterleave_fqs {\n    input: \n      input_fastq = input_fastq\n  }\n\n}\n\ntask uninterleave_fqs {\n  input {\n    File input_fastq\n\n    Int machine_mem_gb = 8\n    Int addtional_disk_size = 10\n  }\n    Int disk_size = ceil(size(input_fastq, \"GB\") * 2) + addtional_disk_size\n    String r1_name = basename(input_fastq, \".fastq\") + \"_reads_1.fastq\"\n    String r2_name = basename(input_fastq, \".fastq\") + \"_reads_2.fastq\"\n  \n  command {\n    cat ~{input_fastq} | paste - - - - - - - -  | \\\n    tee >(cut -f 1-4 | tr \"\\t\" \"\\n\" > ~{r1_name}) | \\\n    cut -f 5-8 | tr \"\\t\" \"\\n\" > ~{r2_name}\n  }\n\n  runtime {\n    docker: \"ubuntu:latest\"\n    memory: machine_mem_gb + \" GB\"\n    disks: \"local-disk \" + disk_size + \" HDD\"\n  }\n\n  output {\n    File r1_fastq = \"~{r1_name}\"\n    File r2_fastq = \"~{r2_name}\"\n  }\n}\n","checksum":[{"checksum":"9d77622636a31737c1854840c0f4b1e6f64d17239dd0e95fce611ca350b3651a","type":"sha256"}],"url":"https://zenodo.org/api/files/1c5383db-4d50-4a66-a812-5f5663215005/interleaved-fastq-to-paired-fastq.wdl"}